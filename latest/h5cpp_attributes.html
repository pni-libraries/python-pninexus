

<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>HDF5 attributes &#8212; pninexus 3.2.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bizstyle.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using the pninexus.nexus package" href="using_nexus.html" />
    <link rel="prev" title="HDF5 datasets" href="h5cpp_dataset.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="using_nexus.html" title="Using the pninexus.nexus package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="h5cpp_dataset.html" title="HDF5 datasets"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pninexus 3.2.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="users_guide.html" >Users Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="using_h5cpp.html" accesskey="U">Using the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pninexus.h5cpp</span></code> package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">HDF5 attributes</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-pninexus.h5cpp.attribute">
<span id="hdf5-attributes"></span><span id="working-with-attributes"></span><h1>HDF5 attributes<a class="headerlink" href="#module-pninexus.h5cpp.attribute" title="Permalink to this heading">¶</a></h1>
<p>Nodes (datasets and groups) have attributes attached to them which can
be used to store meta-data or other related data close to the group or
dataset they are associated with.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Though attributes in many ways behave like datasets, unlike those, they
are not intended to store large data!</p>
</div>
<p>The attributes of a node can be accessed and managed via the
<a class="reference internal" href="h5cpp/attributes.html#pninexus.h5cpp.attribute.AttributeManager" title="pninexus.h5cpp.attribute.AttributeManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeManager</span></code></a> interface accessible from every node via its
<code class="xref py py-attr docutils literal notranslate"><span class="pre">attributes</span></code> property.</p>
<section id="creating-attributes">
<h2>Creating attributes<a class="headerlink" href="#creating-attributes" title="Permalink to this heading">¶</a></h2>
<p>Creating attributes follows more or less the same scheme than creating
datasets. You first have to create and HDF5 datataype and dataspace which
is then passed to the <code class="xref py py-func docutils literal notranslate"><span class="pre">create()</span></code> function of the <a class="reference internal" href="h5cpp/attributes.html#pninexus.h5cpp.attribute.AttributeManager" title="pninexus.h5cpp.attribute.AttributeManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeManager</span></code></a>
instance of a node</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pninexus.h5cpp.datatype</span> <span class="kn">import</span> <span class="n">kVariableString</span>
<span class="kn">from</span> <span class="nn">pninexus.h5cpp.dataspace</span> <span class="kn">import</span> <span class="n">Scalar</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">attr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;unit&quot;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="n">kVariableString</span><span class="p">,</span><span class="n">space</span><span class="o">=</span><span class="n">Scalar</span><span class="p">())</span>
</pre></div>
</div>
<p>Though this seems to be a bit verbose and there is definitely more typing
work to do than in the case of other wrappers, however, on the other side
this gives you full control of how an attribute is created (and <em>full control</em>
is the intention of this wrapper).
You can also pass an instance of <a class="reference internal" href="h5cpp/properties.html#pninexus.h5cpp.property.AttributeCreationList" title="pninexus.h5cpp.property.AttributeCreationList"><code class="xref py py-class docutils literal notranslate"><span class="pre">pninexus.h5cpp.property.AttributeCreationList</span></code></a>
as a fourth argument which would give you the same level of control over
attribute creation as the C-API.</p>
</section>
<section id="accessing-and-managing-attributes">
<h2>Accessing and managing attributes<a class="headerlink" href="#accessing-and-managing-attributes" title="Permalink to this heading">¶</a></h2>
<p>Attributes can be accessed either by their numerical index or by their name
using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code> method of the <a class="reference internal" href="h5cpp/attributes.html#pninexus.h5cpp.attribute.AttributeManager" title="pninexus.h5cpp.attribute.AttributeManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeManager</span></code></a>
instance of a node.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">attr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]</span>

<span class="c1">#or</span>

<span class="n">attr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#get the first attribute</span>
</pre></div>
</div>
<p>To check whether an existing attribute exists us the <code class="xref py py-meth docutils literal notranslate"><span class="pre">exists()</span></code> method
provided by <a class="reference internal" href="h5cpp/attributes.html#pninexus.h5cpp.attribute.AttributeManager" title="pninexus.h5cpp.attribute.AttributeManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeManager</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;unit&quot;</span><span class="p">):</span>
   <span class="n">attr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><a class="reference internal" href="h5cpp/attributes.html#pninexus.h5cpp.attribute.AttributeManager" title="pninexus.h5cpp.attribute.AttributeManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeManager</span></code></a> provides also an interator interface for attributes.
So in order to iterate over all attributes attached to a node we could do</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Existing attributes can be removed from a node using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">remove()</span></code> method
of <a class="reference internal" href="h5cpp/attributes.html#pninexus.h5cpp.attribute.AttributeManager" title="pninexus.h5cpp.attribute.AttributeManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeManager</span></code></a> which takes either a numerical index or the
name of the attribute to delete. Finally the <code class="xref py py-meth docutils literal notranslate"><span class="pre">size()</span></code> method returns
the number of attributes attached to a node.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="o">...</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This node has </span><span class="si">{}</span><span class="s2"> attributes&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="reading-and-writing-data">
<h2>Reading and writing data<a class="headerlink" href="#reading-and-writing-data" title="Permalink to this heading">¶</a></h2>
<p>Reading data from and writing data to an attribute is quite simple. The
<a class="reference internal" href="h5cpp/attributes.html#pninexus.h5cpp.attribute.Attribute" title="pninexus.h5cpp.attribute.Attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attribute</span></code></a> class provides two methods for this <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">attr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]</span>
<span class="n">attr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;degree&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
<p>Like for datasets the <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> method returns an instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> and the <code class="xref py py-class docutils literal notranslate"><span class="pre">write</span></code> function internally
converts every argument to a numpy array before writing (unless it is not
already a numpy array).</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">HDF5 attributes</a><ul>
<li><a class="reference internal" href="#creating-attributes">Creating attributes</a></li>
<li><a class="reference internal" href="#accessing-and-managing-attributes">Accessing and managing attributes</a></li>
<li><a class="reference internal" href="#reading-and-writing-data">Reading and writing data</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="h5cpp_dataset.html"
                          title="previous chapter">HDF5 datasets</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="using_nexus.html"
                          title="next chapter">Using the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pninexus.nexus</span></code> package</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><p>
  <h3 class='versions'>Versions</h3>
  <p>
    <ul>
      <li><a class="reference external" href="index/../../latest/index.html">v:latest</a></li>
      <li><a class="reference external" href="index/../../stable/index.html">v:stable</a></li>
      
      <li><a class="reference external" href="index/../../v3.2.1/index.html">v3.2.1</a></li>
      <li><a class="reference external" href="index/../../v3.2.0/index.html">v3.2.0</a></li>
      <li><a class="reference external" href="index/../../v3.1.0/index.html">v3.1.0</a></li>
      <li><a class="reference external" href="index/../../v3.0.3/index.html">v3.0.3</a></li>
      <li><a class="reference external" href="index/../../v3.0.2/index.html">v3.0.2</a></li>
      <li><a class="reference external" href="index/../../v3.0.1/index.html">v3.0.1</a></li>
      <li><a class="reference external" href="index/../../v3.0.0/index.html">v3.0.0</a></li>
      <li><a class="reference external" href="index/../../v2.0.0/index.html">v2.0.0</a></li>
      <li><a class="reference external" href="index/../../v1.3.4/index.html">v1.3.4</a></li>
      
    </ul>
  </p>
</p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="using_nexus.html" title="Using the pninexus.nexus package"
             >next</a> |</li>
        <li class="right" >
          <a href="h5cpp_dataset.html" title="HDF5 datasets"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pninexus 3.2.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="users_guide.html" >Users Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="using_h5cpp.html" >Using the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pninexus.h5cpp</span></code> package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">HDF5 attributes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, DESY.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>