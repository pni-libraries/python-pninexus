

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HDF5 datatypes &#8212; pninexus 1.3.4 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="HDF5 dataspaces and selections" href="h5cpp_dataspace.html" />
    <link rel="prev" title="HDF5 nodes, links, and groups" href="h5cpp_groups.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="h5cpp_dataspace.html" title="HDF5 dataspaces and selections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="h5cpp_groups.html" title="HDF5 nodes, links, and groups"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pninexus 1.3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="users_guide.html" >Users Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="using_h5cpp.html" accesskey="U">Using the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pninexus.h5cpp</span></code> package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">HDF5 datatypes</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pninexus.h5cpp.datatype">
<span id="hdf5-datatypes"></span><h1>HDF5 datatypes<a class="headerlink" href="#module-pninexus.h5cpp.datatype" title="Permalink to this headline">¶</a></h1>
<p>Beneath HDF5s IO model there are two fundamental concepts</p>
<ul class="simple">
<li><p><em>datatypes</em></p></li>
<li><p>and <em>dataspaces</em>.</p></li>
</ul>
<p>We will deal with the latter one in <a class="reference internal" href="h5cpp_dataspace.html#hdf5-dataspaces-and-selections"><span class="std std-ref">HDF5 dataspaces and selections</span></a> and focus
in this section on datatypes.</p>
<p>Datatypes describe the smallest unit of data written to an HDF5 file. This
can be such simple things a primitive numbers like integer or floating point
numbers, strings but also complex compound data types like heterogeneous
records of a database table. Currently, this wrapper only supports three
types of data types</p>
<ul class="simple">
<li><p><em>integers</em> via <a class="reference internal" href="h5cpp/datatype.html#pninexus.h5cpp.datatype.Integer" title="pninexus.h5cpp.datatype.Integer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Integer</span></code></a></p></li>
<li><p><em>floats</em> via <a class="reference internal" href="h5cpp/datatype.html#pninexus.h5cpp.datatype.Float" title="pninexus.h5cpp.datatype.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a></p></li>
<li><p>and <em>stings</em> via <a class="reference internal" href="h5cpp/datatype.html#pninexus.h5cpp.datatype.String" title="pninexus.h5cpp.datatype.String"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a></p></li>
</ul>
<p>which can be found in the <a class="reference internal" href="#module-pninexus.h5cpp.datatype" title="pninexus.h5cpp.datatype"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pninexus.h5cpp.datatype</span></code></a> package and are
all decendents of the <a class="reference internal" href="h5cpp/datatype.html#pninexus.h5cpp.datatype.Datatype" title="pninexus.h5cpp.datatype.Datatype"><code class="xref py py-class docutils literal notranslate"><span class="pre">Datatype</span></code></a> class. This
package currently not provides the full functionality of the corresponding
C++ namespace <code class="xref cpp cpp-any docutils literal notranslate"><span class="pre">hdf5::datatype</span></code> of <em>h5cpp</em> but enough to get started
from within Python.
Usually you do not want to create a datatype manually. Instead there is is a
factory class <a class="reference internal" href="h5cpp/datatype.html#pninexus.h5cpp.datatype.Factory" title="pninexus.h5cpp.datatype.Factory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factory</span></code></a> which provides a method to
create HDF5 datatypes from numpy dtypes or their string representation.
For conveniance there is a module global instance <code class="xref py py-const docutils literal notranslate"><span class="pre">kFactory</span></code> available
to make life a bit easier.</p>
<p>So in order to create an HDF5 data type for a 64Bit floating point type you
could use something like this</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">pninexus.h5cpp</span> <span class="kn">import</span> <span class="n">datatype</span>

<span class="nb">type</span> <span class="o">=</span> <span class="n">datatype</span><span class="o">.</span><span class="n">kFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s2">&quot;float64&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>There exists also an inverse function which converts an HDF5 datatype to an
appropriate numpy type: <a class="reference internal" href="h5cpp/datatype.html#pninexus.h5cpp.datatype.to_numpy" title="pninexus.h5cpp.datatype.to_numpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_numpy()</span></code></a>. This function returns the
string representation of the appropriate numpy data type</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">pninexus.h5cpp.datatype</span> <span class="kn">import</span> <span class="n">to_numpy</span>


<span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">datatype</span><span class="p">()))</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#module-pninexus.h5cpp.datatype" title="pninexus.h5cpp.datatype"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pninexus.h5cpp.datatype</span></code></a> package also provides a set of predefined
datatypes</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 57%" />
<col style="width: 43%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>datatype constant</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kUInt8</span></code></p></td>
<td><p>8Bit unsigned integer type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kInt8</span></code></p></td>
<td><p>8Bit singed integer type</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kUInt16</span></code></p></td>
<td><p>16Bit unsigned integer type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kInt16</span></code></p></td>
<td><p>16Bit signed integer type</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kUInt32</span></code></p></td>
<td><p>32Bit unsigned integer type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kInt32</span></code></p></td>
<td><p>32Bit signed integer type</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kUInt64</span></code></p></td>
<td><p>64Bit unsigned integer type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kInt64</span></code></p></td>
<td><p>64Bit signed integer type</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kFloat32</span></code></p></td>
<td><p>32Bit floating point type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kFloat64</span></code></p></td>
<td><p>64Bit floating point type</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kFloat128</span></code></p></td>
<td><p>128Bit floating point type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">datatype.kVariableString</span></code></p></td>
<td><p>variable length string type</p></td>
</tr>
</tbody>
</table>
<p>Datatype are only important when creating datasets or attributes. During IO
operations the appropriate type for the data is obtained automatically by the
IO functions.</p>
<div class="section" id="string-types">
<h2>String types<a class="headerlink" href="#string-types" title="Permalink to this headline">¶</a></h2>
<p>String types are particularly difficult in HDF5. This is true for virtually
every wrapper or programming interface currently available. Though <em>h5py</em> seems
to make things easy (at least for the user side) there are corner cases where
even <em>h5py</em> fails to read string data.
Similar to <em>h5py</em> we focus on the string storage scheme of numpy. When storing
strings in a numpy array they are always stored as fixed size strings with
NULL padding. The size of the strings is determined by the longest string in
the array. In terms of HDF5 that would be</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pninexus.h5cpp.datatype</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">pninexus.h5cpp.datatype</span> <span class="kn">import</span> <span class="n">StringPad</span>
<span class="kn">from</span> <span class="nn">pninexus.h5cpp.datatype</span> <span class="kn">import</span> <span class="n">CharacterEncoding</span>

<span class="n">datatype</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">fixed</span><span class="p">(</span><span class="n">str_len</span><span class="p">)</span>
<span class="n">datatype</span><span class="o">.</span><span class="n">padding</span>  <span class="o">=</span> <span class="n">StringPad</span><span class="o">.</span><span class="n">NULLPAD</span>
<span class="n">datatype</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">CharachterEncoding</span><span class="o">.</span><span class="n">UTF8</span>
</pre></div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">HDF5 datatypes</a><ul>
<li><a class="reference internal" href="#string-types">String types</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="h5cpp_groups.html"
                        title="previous chapter">HDF5 nodes, links, and groups</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="h5cpp_dataspace.html"
                        title="next chapter">HDF5 dataspaces and selections</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><p>
  <h3 class='versions'>Versions</h3>
  <p>
    <ul>
      <li><a class="reference external" href="index/../../latest/index.html">v:latest</a></li>
      <li><a class="reference external" href="index/../../stable/index.html">v:stable</a></li>
      
      <li><a class="reference external" href="index/../../v2.0.0/index.html">v2.0.0</a></li>
      <li><a class="reference external" href="index/../../v1.3.4/index.html">v1.3.4</a></li>
      
    </ul>
  </p>
</p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="h5cpp_dataspace.html" title="HDF5 dataspaces and selections"
             >next</a> |</li>
        <li class="right" >
          <a href="h5cpp_groups.html" title="HDF5 nodes, links, and groups"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pninexus 1.3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="users_guide.html" >Users Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="using_h5cpp.html" >Using the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pninexus.h5cpp</span></code> package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">HDF5 datatypes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, DESY.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>